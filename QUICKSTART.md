# Quick Start Guide

Get up and running with imggen in 5 minutes.

## Prerequisites

âœ… Python 3.11+  
âœ… ComfyUI running at `http://127.0.0.1:8188`  
âœ… SDXL Base model loaded in ComfyUI

**Need to install ComfyUI?**
```bash
./setup_comfyui.sh
```
See [ComfyUI Setup Guide](docs/COMFYUI_SETUP.md) for details.

## Installation

```bash
# Make sure you're in the project directory
cd diffuseai

# Run the dev script (auto-installs everything)
./dev.sh --help
```

That's it! The `dev.sh` script will:
- Install `uv` package manager if needed
- Create a virtual environment
- Install all dependencies
- Initialize the database
- Set up data directories

## First Steps

### 1. Register a User

```bash
./dev.sh user register
```

You'll be prompted for:
- Username (min 3 characters)
- Password (min 8 characters)
- Password confirmation

**Important:** Your password is used to derive encryption keys. If you lose it, you cannot decrypt your images!

### 2. Login

```bash
./dev.sh user login
```

This creates a session that lasts 1 hour by default (configurable).

### 3. Generate Your First Image

```bash
./dev.sh generate "a beautiful sunset over mountains, highly detailed, 8k"
```

The image will be:
1. Generated by ComfyUI
2. Encrypted with your master key
3. Stored in the vault
4. Metadata saved (encrypted)

Generation takes ~10-30 seconds depending on your GPU.

### 4. View Your Gallery

```bash
# List all images
./dev.sh gallery list

# View details
./dev.sh gallery info 1

# Export (decrypt) to file
./dev.sh gallery export 1 my_image.png
```

### 5. Advanced Generation

```bash
# Custom size
./dev.sh generate "epic dragon" --size 1024x768

# More steps for quality
./dev.sh generate "portrait" --steps 40

# Negative prompt
./dev.sh generate "cat" -n "ugly, blurry, bad anatomy"

# Reproducible with seed
./dev.sh generate "landscape" --seed 42

# Custom CFG scale
./dev.sh generate "abstract art" --cfg 8.5
```

## Common Commands

```bash
# Check who is logged in
./dev.sh user whoami

# Search for images
./dev.sh gallery search "sunset"

# Delete an image
./dev.sh gallery delete 1

# Logout
./dev.sh user logout

# Show configuration
./dev.sh config show
```

## Troubleshooting

### "GPU provider is not available"

**Problem:** ComfyUI is not running or not accessible.

**Solution:**
1. Make sure ComfyUI is running: `http://127.0.0.1:8188`
2. Check the URL in config: `./dev.sh config show`
3. Set custom URL: `export IMGGEN_COMFYUI_URL=http://your-url:port`

### "No active session"

**Problem:** You're not logged in or session expired.

**Solution:**
```bash
./dev.sh user login
```

### "Image X not found"

**Problem:** Image doesn't exist or belongs to another user.

**Solution:**
- Check image ID: `./dev.sh gallery list`
- Make sure you're logged in as the correct user

### Forgotten Password

**Problem:** Can't remember password.

**Solution:**  
Unfortunately, with zero-knowledge encryption, **there is no password recovery**. Your images are encrypted with keys derived from your password. If you lose the password, the images cannot be decrypted.

**Prevention:** Use a password manager!

## Configuration

Environment variables (prefix with `IMGGEN_`):

```bash
export IMGGEN_COMFYUI_URL=http://127.0.0.1:8188
export IMGGEN_DEFAULT_STEPS=30
export IMGGEN_SESSION_TIMEOUT=7200  # 2 hours
export IMGGEN_DEFAULT_WIDTH=1024
export IMGGEN_DEFAULT_HEIGHT=1024
```

## Where is Everything Stored?

```
data/
â”œâ”€â”€ imggen.db          # User accounts, image metadata (encrypted)
â”œâ”€â”€ sessions/          # Active session files
â””â”€â”€ vaults/            # Encrypted images
    â””â”€â”€ {user_id}/     # Per-user vault
```

**Security Note:** The entire `data/` directory should be backed up and kept secure. Even though images are encrypted, the database contains your auth hash.

## Next Steps

- Read the full [README.md](README.md) for architecture details
- Check [CONTRIBUTING.md](CONTRIBUTING.md) if you want to contribute
- See [build.md](build.md) for the complete technical specification

## Need Help?

- Check logs: No logs are generated to avoid leaking sensitive data
- Read error messages: They're descriptive
- Open an issue on GitHub

---

**Happy generating! ðŸŽ¨**

